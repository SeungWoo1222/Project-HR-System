<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title th:text="${title}">하루하루</title>

    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <script th:src="@{/js/layout.js}"></script>

    <link rel="stylesheet" th:href="@{/css/modal.css}">

    <!-- 각 페이지의 script가 작성될 위치 -->
    <th:block layout:fragment="script"></th:block>

    <!-- 각 페이지의 css가 작성될 위치 -->
    <th:block layout:fragment="css"></th:block>
</head>

<body>
<div class="container">
    <div th:replace="~{fragments/header :: header(title=${title})}"></div>
    <div class="content-layout">
        <div th:replace="~{fragments/sidebar :: sidebar}"></div>
        <div layout:fragment="~{content}" class="content-wrapper">
            <!-- 기본 컨텐츠 영역 -->
        </div>
    </div>
    <div></div>
</div>

<!-- 모달 HTML 구조 -->
<div class="modal" id="myModal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <div id="modal-body">
            <!-- 모달 컨텐츠 -->
        </div>
    </div>
</div>

<script>
    // 모달 열기 함수
    function openModal(contentUrl) {
        var modal = document.getElementById("myModal");
        var modalBody = document.getElementById("modal-body");

        // 컨텐츠 로드
        fetch(contentUrl)
            .then(response => response.text())
            .then(html => {
                modalBody.innerHTML = html;
                modal.style.display = "block";
            });
    }

    // 모달 닫기 함수
    function closeModal() {
        var modal = document.getElementById("myModal");
        modal.style.display = "none";
    }

    // 모달 외부 클릭 시 닫기
    window.onclick = function(event) {
        var modal = document.getElementById("myModal");
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>

</body>
</html>
