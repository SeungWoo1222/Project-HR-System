<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<style>
    .attendance-detail-container {
        width: 550px;
    }
    .attendance-detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .attendance-detail-header h2 {
        margin: 0;
    }
    .attendance-detail-container table {
        border: solid 1px #ddd;
        border-collapse: collapse;
        margin-top: 20px;
    }
    .attendance-detail-container table th, .attendance-detail-container table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    .attendance-detail-container table th {
        width: 150px;
        background-color: #f7f7f7;
    }
    .attendance-detail-container table td {
        width: 400px;
    }
    .overtime-td {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .overtime-td button {
        padding: 8px;
    }
</style>

<div class="attendance-detail-container">
    <div class="attendance-detail-header">
        <h2><span th:text="${employee.name} + ' 님의 근태 정보 (' + ${#temporals.format(attendance.date, 'yyyy년 MM월 dd일 (EE)')} + ')'"></span></h2>
        <div class="btn-container" sec:authorize="hasRole('ROLE_MANAGER') or hasRole('ROLE_HR')">
            <button type="button" class="btn" th:attendanceId="${attendance.attendanceId}"
                    th:onclick="goToUpdateForm(this.getAttribute('attendanceId'))">수정</button>
        </div>
    </div>
    <table>
        <tr>
            <th>사원 ID</th>
            <td th:text="${attendance.employeeId}"></td>
        </tr>
        <tr>
            <th>출근 시간</th>
            <td th:text="${#temporals.format(attendance.checkIn, 'HH:mm')}"></td>
        </tr>
        <tr>
            <th>퇴근 시간</th>
            <td th:text="${#temporals.format(attendance.checkOut, 'HH:mm')}"></td>
        </tr>
        <tr>
            <th>근무한 정규 근무시간</th>
            <td th:text="${attendance.workingHours} + '시간'"></td>
        </tr>
        <tr>
            <th>근태 상태</th>
            <td th:text="${attendance.status}"></td>
        </tr>
        <tr>
            <th>초과 근무시간</th>
            <td th:if="${attendance.overtimeId} == null"></td>
            <td th:if="${attendance.overtimeId} != null">
                <div class="overtime-td">
                    <span th:text="${attendance.overtime?.totalHours} + '시간 '
                    + '(' + ${#temporals.format(attendance.overtime?.startTime, 'HH:mm')}
                    + '~' + ${#temporals.format(attendance.overtime?.endTime, 'HH:mm')} + ')'"></span>
                    <button type="button" class="btn" th:overtimeId="${attendance.overtimeId}"
                            th:onclick="goToUpdateOvertimeForm(this.getAttribute('overtimeId'))">초과근무 수정</button>
                </div>
            </td>
        </tr>
        <tr>
            <th>휴가 정보</th>
            <td th:text="${attendance.vacationId}"></td>
        </tr>
        <tr>
            <th>출장 정보</th>
            <td th:text="${attendance.tripId}"></td>
        </tr>
        <tr>
            <th>메모</th>
            <td th:text="${attendance.notes}"></td>
        </tr>
        <tr>
            <th>마지막 수정 일시</th>
            <td th:text="${#temporals.format(attendance.lastModified, 'yyyy년 MM월 dd일 hh:mm')}"></td>
        </tr>
        <tr>
            <th>마지막 수정 사원 ID</th>
            <td th:text="${attendance.modifiedBy}"></td>
        </tr>
    </table>
</div>

</html>
